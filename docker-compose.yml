version: "3.8"
services:
  qmk:
    image: qmkfm/qmk_firmware
    privileged: true
    working_dir: /qmk_firmware
    volumes:
      - ./qmk_firmware/keyboards:/qmk_firmware/keyboards
      - ./.build:/qmk_firmware/.build
    environment:
      KEYBOARDR: keyball/rev1/ball
      KEYBOARDL: keyball/rev1/noball
      KEYMAP: via_acc_left
    # QMK Command: qmk compile -kb KEYBOARD -km KEYMAP
    command: /bin/bash -c 'qmk compile -kb $$KEYBOARDR -km $$KEYMAP && qmk compile -kb $$KEYBOARDL -km $$KEYMAP'
